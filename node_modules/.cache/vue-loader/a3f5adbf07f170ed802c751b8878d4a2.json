{"remainingRequest":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin1/Desktop/ledger-cosmos-js (copy)/vue_example/components/LedgerExample.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/vue_example/components/LedgerExample.vue","mtime":1573107892715},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMKaW1wb3J0IFRyYW5zcG9ydFdlYlVTQiBmcm9tICJAbGVkZ2VyaHEvaHctdHJhbnNwb3J0LXdlYnVzYiI7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMKaW1wb3J0IFRyYW5zcG9ydFUyRiBmcm9tICJAbGVkZ2VyaHEvaHctdHJhbnNwb3J0LXUyZiI7CmltcG9ydCBDb3Ntb3NBcHAgZnJvbSAiLi4vLi4vc3JjIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29zbW9zTGVkZ2VyIiwKICBwcm9wczoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRldmljZUxvZzogW10sCiAgICAgIHRyYW5zcG9ydENob2ljZTogIlUyRiIsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxlZGdlclN0YXR1cygpIHsKICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlTG9nOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZyhtc2cpIHsKICAgICAgdGhpcy5kZXZpY2VMb2cucHVzaCh7CiAgICAgICAgaW5kZXg6IHRoaXMuZGV2aWNlTG9nLmxlbmd0aCwKICAgICAgICBtc2csCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGdldFRyYW5zcG9ydCgpIHsKICAgICAgbGV0IHRyYW5zcG9ydCA9IG51bGw7CgogICAgICB0aGlzLmxvZyhgVHJ5aW5nIHRvIGNvbm5lY3QgdmlhICR7dGhpcy50cmFuc3BvcnRDaG9pY2V9Li4uYCk7CiAgICAgIGlmICh0aGlzLnRyYW5zcG9ydENob2ljZSA9PT0gIldlYlVTQiIpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdHJhbnNwb3J0ID0gYXdhaXQgVHJhbnNwb3J0V2ViVVNCLmNyZWF0ZSgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHRoaXMubG9nKGUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMudHJhbnNwb3J0Q2hvaWNlID09PSAiVTJGIikgewogICAgICAgIHRyeSB7CiAgICAgICAgICB0cmFuc3BvcnQgPSBhd2FpdCBUcmFuc3BvcnRVMkYuY3JlYXRlKDEwMDAwKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0aGlzLmxvZyhlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cmFuc3BvcnQ7CiAgICB9LAogICAgYXN5bmMgZ2V0VmVyc2lvbigpIHsKICAgICAgdGhpcy5kZXZpY2VMb2cgPSBbXTsKCiAgICAgIC8vIEdpdmVuIGEgdHJhbnNwb3J0IChVMkYvSElGL1dlYlVTQikgaXQgaXMgcG9zc2libGUgaW5zdGFudGlhdGUgdGhlIGFwcAogICAgICBjb25zdCB0cmFuc3BvcnQgPSBhd2FpdCB0aGlzLmdldFRyYW5zcG9ydCgpOwogICAgICBjb25zdCBhcHAgPSBuZXcgQ29zbW9zQXBwKHRyYW5zcG9ydCk7CgogICAgICAvLyBub3cgaXQgaXMgcG9zc2libGUgdG8gYWNjZXNzIGFsbCBjb21tYW5kcyBpbiB0aGUgYXBwCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBwLmdldFZlcnNpb24oKTsKICAgICAgaWYgKHJlc3BvbnNlLnJldHVybl9jb2RlICE9PSAweDkwMDApIHsKICAgICAgICB0aGlzLmxvZyhgRXJyb3IgWyR7cmVzcG9uc2UucmV0dXJuX2NvZGV9XSAke3Jlc3BvbnNlLmVycm9yX21lc3NhZ2V9YCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmxvZygiUmVzcG9uc2UgcmVjZWl2ZWQhIik7CiAgICAgIHRoaXMubG9nKGBBcHAgVmVyc2lvbiAke3Jlc3BvbnNlLm1ham9yfS4ke3Jlc3BvbnNlLm1pbm9yfS4ke3Jlc3BvbnNlLnBhdGNofWApOwogICAgICB0aGlzLmxvZyhgRGV2aWNlIExvY2tlZDogJHtyZXNwb25zZS5kZXZpY2VfbG9ja2VkfWApOwogICAgICB0aGlzLmxvZyhgVGVzdCBtb2RlOiAke3Jlc3BvbnNlLnRlc3RfbW9kZX1gKTsKICAgICAgdGhpcy5sb2coIkZ1bGwgcmVzcG9uc2U6Iik7CiAgICAgIHRoaXMubG9nKHJlc3BvbnNlKTsKICAgIH0sCiAgICBhc3luYyBzaG93QWRkcmVzcygpIHsKICAgICAgdGhpcy5kZXZpY2VMb2cgPSBbXTsKCiAgICAgIC8vIEdpdmVuIGEgdHJhbnNwb3J0IChVMkYvSElGL1dlYlVTQikgaXQgaXMgcG9zc2libGUgaW5zdGFudGlhdGUgdGhlIGFwcAogICAgICBjb25zdCB0cmFuc3BvcnQgPSBhd2FpdCB0aGlzLmdldFRyYW5zcG9ydCgpOwogICAgICBjb25zdCBhcHAgPSBuZXcgQ29zbW9zQXBwKHRyYW5zcG9ydCk7CgogICAgICAvLyBub3cgaXQgaXMgcG9zc2libGUgdG8gYWNjZXNzIGFsbCBjb21tYW5kcyBpbiB0aGUgYXBwCiAgICAgIHRoaXMubG9nKCJQbGVhc2UgY2xpY2sgaW4gdGhlIGRldmljZSIpOwogICAgICBjb25zdCBwYXRoID0gWzQ0LCAxMTgsIDUsIDAsIDNdOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwcC5nZXRBZGRyZXNzQW5kUHViS2V5KHBhdGgsICJjb3Ntb3MiKTsKICAgICAgaWYgKHJlc3BvbnNlLnJldHVybl9jb2RlICE9PSAweDkwMDApIHsKICAgICAgICB0aGlzLmxvZyhgRXJyb3IgWyR7cmVzcG9uc2UucmV0dXJuX2NvZGV9XSAke3Jlc3BvbnNlLmVycm9yX21lc3NhZ2V9YCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmxvZygiUmVzcG9uc2UgcmVjZWl2ZWQhIik7CiAgICAgIHRoaXMubG9nKGBBcHAuVmVyc2lvbi4ke3Jlc3BvbnNlLm1ham9yfS4ke3Jlc3BvbnNlLm1pbm9yfS4ke3Jlc3BvbnNlLnBhdGNofWApOwogICAgICB0aGlzLmxvZyhgRGV2aWNlIExvY2tlZDogJHtyZXNwb25zZS5kZXZpY2VfbG9ja2VkfWApOwogICAgICB0aGlzLmxvZyhgVGVzdCBtb2RlOiAke3Jlc3BvbnNlLnRlc3RfbW9kZX1gKTsKICAgICAgdGhpcy5sb2coIkZ1bGwgcmVzcG9uc2U6Iik7CiAgICAgIHRoaXMubG9nKHJlc3BvbnNlKTsKICAgIH0sCiAgICBhc3luYyBzaWduRXhhbXBsZVR4KCkgewogICAgICB0aGlzLmRldmljZUxvZyA9IFtdOwoKICAgICAgLy8gR2l2ZW4gYSB0cmFuc3BvcnQgKFUyRi9ISUYvV2ViVVNCKSBpdCBpcyBwb3NzaWJsZSBpbnN0YW50aWF0ZSB0aGUgYXBwCiAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IGF3YWl0IHRoaXMuZ2V0VHJhbnNwb3J0KCk7CiAgICAgIGNvbnN0IGFwcCA9IG5ldyBDb3Ntb3NBcHAodHJhbnNwb3J0KTsKCiAgICAgIC8vIG5vdyBpdCBpcyBwb3NzaWJsZSB0byBhY2Nlc3MgYWxsIGNvbW1hbmRzIGluIHRoZSBhcHAKICAgICAgY29uc3QgcGF0aCA9IFs0NCwgMTE4LCAwLCAwLCAwXTsKICAgICAgY29uc3QgbWVzc2FnZSA9CiAgICAgICAgJ3siYWNjb3VudF9udW1iZXIiOiI2NTcxIiwiY2hhaW5faWQiOiJjb3Ntb3NodWItMiIsImZlZSI6eyJhbW91bnQiOlt7ImFtb3VudCI6IjUwMDAiLCJkZW5vbSI6InVhdG9tIn1dLCJnYXMiOiIyMDAwMDAifSwibWVtbyI6IkRlbGVnYXRlZCB3aXRoIExlZGdlciBmcm9tIHVuaW9uLm1hcmtldCIsIm1zZ3MiOlt7InR5cGUiOiJjb3Ntb3Mtc2RrL01zZ0RlbGVnYXRlIiwidmFsdWUiOnsiYW1vdW50Ijp7ImFtb3VudCI6IjEwMDAwMDAiLCJkZW5vbSI6InVhdG9tIn0sImRlbGVnYXRvcl9hZGRyZXNzIjoiY29zbW9zMTAyaHR5MGp2MnMyOWx5YzR1MHR2OTd6OXYyOThlMjR0M3Z3dHBsIiwidmFsaWRhdG9yX2FkZHJlc3MiOiJjb3Ntb3N2YWxvcGVyMWdyZ2VseW5nMnY2djN0OHo4N3d1M3N4Z3Q5bTVzMDN4Znl0dno3In19XSwic2VxdWVuY2UiOiIwIn0nOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwcC5zaWduKHBhdGgsIG1lc3NhZ2UpOwoKICAgICAgdGhpcy5sb2coIlJlc3BvbnNlIHJlY2VpdmVkISIpOwogICAgICB0aGlzLmxvZyhgQXBwLlZlcnNpb24uJHtyZXNwb25zZS5tYWpvcn0uJHtyZXNwb25zZS5taW5vcn0uJHtyZXNwb25zZS5wYXRjaH1gKTsKICAgICAgdGhpcy5sb2coYERldmljZSBMb2NrZWQ6ICR7cmVzcG9uc2UuZGV2aWNlX2xvY2tlZH1gKTsKICAgICAgdGhpcy5sb2coYFRlc3QgbW9kZTogJHtyZXNwb25zZS50ZXN0X21vZGV9YCk7CiAgICAgIHRoaXMubG9nKCJGdWxsIHJlc3BvbnNlOiIpOwogICAgICB0aGlzLmxvZyhyZXNwb25zZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["LedgerExample.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LedgerExample.vue","sourceRoot":"vue_example/components","sourcesContent":["<template>\n  <div class=\"cosmosLedger\">\n    <input id=\"webusb\" v-model=\"transportChoice\" type=\"radio\" value=\"WebUSB\" />\n    <label for=\"webusb\">WebUSB</label>\n    <input id=\"u2f\" v-model=\"transportChoice\" type=\"radio\" value=\"U2F\" />\n    <label for=\"u2f\">U2F</label>\n    <br />\n    <!--\n        Commands\n    -->\n    \n    <button @click=\"showAddress\">\n      Show Address\n    </button>\n\n  \n    <!--\n        Commands\n    -->\n    <ul id=\"ledger-status\">\n      <li v-for=\"item in ledgerStatus\" :key=\"item.index\">\n        {{ item.msg }}\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport TransportWebUSB from \"@ledgerhq/hw-transport-webusb\";\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport TransportU2F from \"@ledgerhq/hw-transport-u2f\";\nimport CosmosApp from \"../../src\";\n\nexport default {\n  name: \"CosmosLedger\",\n  props: {},\n  data() {\n    return {\n      deviceLog: [],\n      transportChoice: \"U2F\",\n    };\n  },\n  computed: {\n    ledgerStatus() {\n      return this.deviceLog;\n    },\n  },\n  methods: {\n    log(msg) {\n      this.deviceLog.push({\n        index: this.deviceLog.length,\n        msg,\n      });\n    },\n    async getTransport() {\n      let transport = null;\n\n      this.log(`Trying to connect via ${this.transportChoice}...`);\n      if (this.transportChoice === \"WebUSB\") {\n        try {\n          transport = await TransportWebUSB.create();\n        } catch (e) {\n          this.log(e);\n        }\n      }\n\n      if (this.transportChoice === \"U2F\") {\n        try {\n          transport = await TransportU2F.create(10000);\n        } catch (e) {\n          this.log(e);\n        }\n      }\n\n      return transport;\n    },\n    async getVersion() {\n      this.deviceLog = [];\n\n      // Given a transport (U2F/HIF/WebUSB) it is possible instantiate the app\n      const transport = await this.getTransport();\n      const app = new CosmosApp(transport);\n\n      // now it is possible to access all commands in the app\n      const response = await app.getVersion();\n      if (response.return_code !== 0x9000) {\n        this.log(`Error [${response.return_code}] ${response.error_message}`);\n        return;\n      }\n\n      this.log(\"Response received!\");\n      this.log(`App Version ${response.major}.${response.minor}.${response.patch}`);\n      this.log(`Device Locked: ${response.device_locked}`);\n      this.log(`Test mode: ${response.test_mode}`);\n      this.log(\"Full response:\");\n      this.log(response);\n    },\n    async showAddress() {\n      this.deviceLog = [];\n\n      // Given a transport (U2F/HIF/WebUSB) it is possible instantiate the app\n      const transport = await this.getTransport();\n      const app = new CosmosApp(transport);\n\n      // now it is possible to access all commands in the app\n      this.log(\"Please click in the device\");\n      const path = [44, 118, 5, 0, 3];\n      const response = await app.getAddressAndPubKey(path, \"cosmos\");\n      if (response.return_code !== 0x9000) {\n        this.log(`Error [${response.return_code}] ${response.error_message}`);\n        return;\n      }\n\n      this.log(\"Response received!\");\n      this.log(`App.Version.${response.major}.${response.minor}.${response.patch}`);\n      this.log(`Device Locked: ${response.device_locked}`);\n      this.log(`Test mode: ${response.test_mode}`);\n      this.log(\"Full response:\");\n      this.log(response);\n    },\n    async signExampleTx() {\n      this.deviceLog = [];\n\n      // Given a transport (U2F/HIF/WebUSB) it is possible instantiate the app\n      const transport = await this.getTransport();\n      const app = new CosmosApp(transport);\n\n      // now it is possible to access all commands in the app\n      const path = [44, 118, 0, 0, 0];\n      const message =\n        '{\"account_number\":\"6571\",\"chain_id\":\"cosmoshub-2\",\"fee\":{\"amount\":[{\"amount\":\"5000\",\"denom\":\"uatom\"}],\"gas\":\"200000\"},\"memo\":\"Delegated with Ledger from union.market\",\"msgs\":[{\"type\":\"cosmos-sdk/MsgDelegate\",\"value\":{\"amount\":{\"amount\":\"1000000\",\"denom\":\"uatom\"},\"delegator_address\":\"cosmos102hty0jv2s29lyc4u0tv97z9v298e24t3vwtpl\",\"validator_address\":\"cosmosvaloper1grgelyng2v6v3t8z87wu3sxgt9m5s03xfytvz7\"}}],\"sequence\":\"0\"}';\n      const response = await app.sign(path, message);\n\n      this.log(\"Response received!\");\n      this.log(`App.Version.${response.major}.${response.minor}.${response.patch}`);\n      this.log(`Device Locked: ${response.device_locked}`);\n      this.log(`Test mode: ${response.test_mode}`);\n      this.log(\"Full response:\");\n      this.log(response);\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\n\nbutton {\n  padding: 5px;\n  font-weight: bold;\n  font-size: medium;\n}\n\nul {\n  padding: 10px;\n  text-align: left;\n  alignment: left;\n  list-style-type: none;\n  background: black;\n  font-weight: bold;\n  color: greenyellow;\n}\n</style>\n"]}]}