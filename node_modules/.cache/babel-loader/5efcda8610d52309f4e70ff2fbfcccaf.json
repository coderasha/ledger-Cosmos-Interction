{"remainingRequest":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/babel-loader/lib/index.js!/home/admin1/Desktop/ledger-cosmos-js (copy)/src/common.js","dependencies":[{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/src/common.js","mtime":1573038128251},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/.babelrc","mtime":1573041144236},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin1/Desktop/ledger-cosmos-js (copy)/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yIjsKZXhwb3J0IHZhciBDTEEgPSAweDU1OwpleHBvcnQgdmFyIENIVU5LX1NJWkUgPSAyNTA7CmV4cG9ydCB2YXIgQVBQX0tFWSA9ICJDU00iOwpleHBvcnQgdmFyIElOUyA9IHsKICBHRVRfVkVSU0lPTjogMHgwMCwKICBTSUdOX1NFQ1AyNTZLMTogMHgwMiwKICBHRVRfQUREUl9TRUNQMjU2SzE6IDB4MDQKfTsKZXhwb3J0IHZhciBQQVlMT0FEX1RZUEUgPSB7CiAgSU5JVDogMHgwMCwKICBBREQ6IDB4MDEsCiAgTEFTVDogMHgwMgp9Owp2YXIgRVJST1JfREVTQ1JJUFRJT04gPSB7CiAgMTogIlUyRjogVW5rbm93biIsCiAgMjogIlUyRjogQmFkIHJlcXVlc3QiLAogIDM6ICJVMkY6IENvbmZpZ3VyYXRpb24gdW5zdXBwb3J0ZWQiLAogIDQ6ICJVMkY6IERldmljZSBJbmVsaWdpYmxlIiwKICA1OiAiVTJGOiBUaW1lb3V0IiwKICAxNDogIlRpbWVvdXQiLAogIDB4OTAwMDogIk5vIGVycm9ycyIsCiAgMHg5MDAxOiAiRGV2aWNlIGlzIGJ1c3kiLAogIDB4NjgwMjogIkVycm9yIGRlcml2aW5nIGtleXMiLAogIDB4NjQwMDogIkV4ZWN1dGlvbiBFcnJvciIsCiAgMHg2NzAwOiAiV3JvbmcgTGVuZ3RoIiwKICAweDY5ODI6ICJFbXB0eSBCdWZmZXIiLAogIDB4Njk4MzogIk91dHB1dCBidWZmZXIgdG9vIHNtYWxsIiwKICAweDY5ODQ6ICJEYXRhIGlzIGludmFsaWQiLAogIDB4Njk4NTogIkNvbmRpdGlvbnMgbm90IHNhdGlzZmllZCIsCiAgMHg2OTg2OiAiVHJhbnNhY3Rpb24gcmVqZWN0ZWQiLAogIDB4NmE4MDogIkJhZCBrZXkgaGFuZGxlIiwKICAweDZiMDA6ICJJbnZhbGlkIFAxL1AyIiwKICAweDZkMDA6ICJJbnN0cnVjdGlvbiBub3Qgc3VwcG9ydGVkIiwKICAweDZlMDA6ICJDb3Ntb3MgYXBwIGRvZXMgbm90IHNlZW0gdG8gYmUgb3BlbiIsCiAgMHg2ZjAwOiAiVW5rbm93biBlcnJvciIsCiAgMHg2ZjAxOiAiU2lnbi92ZXJpZnkgZXJyb3IiCn07CmV4cG9ydCBmdW5jdGlvbiBlcnJvckNvZGVUb1N0cmluZyhzdGF0dXNDb2RlKSB7CiAgaWYgKHN0YXR1c0NvZGUgaW4gRVJST1JfREVTQ1JJUFRJT04pIHJldHVybiBFUlJPUl9ERVNDUklQVElPTltzdGF0dXNDb2RlXTsKICByZXR1cm4gIlVua25vd24gU3RhdHVzIENvZGU6ICIuY29uY2F0KHN0YXR1c0NvZGUpOwp9CmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRXJyb3JSZXNwb25zZShyZXNwb25zZSkgewogIHJldHVybiB7CiAgICByZXR1cm5fY29kZTogcmVzcG9uc2Uuc3RhdHVzQ29kZSwKICAgIGVycm9yX21lc3NhZ2U6IGVycm9yQ29kZVRvU3RyaW5nKHJlc3BvbnNlLnN0YXR1c0NvZGUpCiAgfTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0VmVyc2lvbihfeCkgewogIHJldHVybiBfZ2V0VmVyc2lvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0VmVyc2lvbigpIHsKICBfZ2V0VmVyc2lvbiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICBfcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0cmFuc3BvcnQpIHsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRyYW5zcG9ydC5zZW5kKENMQSwgSU5TLkdFVF9WRVJTSU9OLCAwLCAwKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIHZhciBlcnJvckNvZGVEYXRhID0gcmVzcG9uc2Uuc2xpY2UoLTIpOwogICAgICAgICAgICAgIHZhciByZXR1cm5Db2RlID0gZXJyb3JDb2RlRGF0YVswXSAqIDI1NiArIGVycm9yQ29kZURhdGFbMV07CiAgICAgICAgICAgICAgdmFyIHRhcmdldElkID0gMDsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmxlbmd0aCA+PSA5KSB7CiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovCiAgICAgICAgICAgICAgICB0YXJnZXRJZCA9IChyZXNwb25zZVs1XSA8PCAyNCkgKyAocmVzcG9uc2VbNl0gPDwgMTYpICsgKHJlc3BvbnNlWzddIDw8IDgpICsgKHJlc3BvbnNlWzhdIDw8IDApOwogICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1iaXR3aXNlICovCiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcmV0dXJuX2NvZGU6IHJldHVybkNvZGUsCiAgICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlOiBlcnJvckNvZGVUb1N0cmluZyhyZXR1cm5Db2RlKSwKICAgICAgICAgICAgICAgIC8vIC8vLwogICAgICAgICAgICAgICAgdGVzdF9tb2RlOiByZXNwb25zZVswXSAhPT0gMCwKICAgICAgICAgICAgICAgIG1ham9yOiByZXNwb25zZVsxXSwKICAgICAgICAgICAgICAgIG1pbm9yOiByZXNwb25zZVsyXSwKICAgICAgICAgICAgICAgIHBhdGNoOiByZXNwb25zZVszXSwKICAgICAgICAgICAgICAgIGRldmljZV9sb2NrZWQ6IHJlc3BvbnNlWzRdID09PSAxLAogICAgICAgICAgICAgICAgdGFyZ2V0X2lkOiB0YXJnZXRJZC50b1N0cmluZygxNikKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LCBwcm9jZXNzRXJyb3JSZXNwb25zZSkpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRWZXJzaW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["/home/admin1/Desktop/ledger-cosmos-js (copy)/src/common.js"],"names":["CLA","CHUNK_SIZE","APP_KEY","INS","GET_VERSION","SIGN_SECP256K1","GET_ADDR_SECP256K1","PAYLOAD_TYPE","INIT","ADD","LAST","ERROR_DESCRIPTION","errorCodeToString","statusCode","processErrorResponse","response","return_code","error_message","getVersion","transport","send","then","errorCodeData","slice","returnCode","targetId","length","test_mode","major","minor","patch","device_locked","target_id","toString"],"mappings":"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","sourcesContent":["export const CLA = 0x55;\nexport const CHUNK_SIZE = 250;\nexport const APP_KEY = \"CSM\";\n\nexport const INS = {\n  GET_VERSION: 0x00,\n  SIGN_SECP256K1: 0x02,\n  GET_ADDR_SECP256K1: 0x04,\n};\n\nexport const PAYLOAD_TYPE = {\n  INIT: 0x00,\n  ADD: 0x01,\n  LAST: 0x02,\n};\n\nconst ERROR_DESCRIPTION = {\n  1: \"U2F: Unknown\",\n  2: \"U2F: Bad request\",\n  3: \"U2F: Configuration unsupported\",\n  4: \"U2F: Device Ineligible\",\n  5: \"U2F: Timeout\",\n  14: \"Timeout\",\n  0x9000: \"No errors\",\n  0x9001: \"Device is busy\",\n  0x6802: \"Error deriving keys\",\n  0x6400: \"Execution Error\",\n  0x6700: \"Wrong Length\",\n  0x6982: \"Empty Buffer\",\n  0x6983: \"Output buffer too small\",\n  0x6984: \"Data is invalid\",\n  0x6985: \"Conditions not satisfied\",\n  0x6986: \"Transaction rejected\",\n  0x6a80: \"Bad key handle\",\n  0x6b00: \"Invalid P1/P2\",\n  0x6d00: \"Instruction not supported\",\n  0x6e00: \"Cosmos app does not seem to be open\",\n  0x6f00: \"Unknown error\",\n  0x6f01: \"Sign/verify error\",\n};\n\nexport function errorCodeToString(statusCode) {\n  if (statusCode in ERROR_DESCRIPTION) return ERROR_DESCRIPTION[statusCode];\n  return `Unknown Status Code: ${statusCode}`;\n}\n\nexport function processErrorResponse(response) {\n  return {\n    return_code: response.statusCode,\n    error_message: errorCodeToString(response.statusCode),\n  };\n}\n\nexport async function getVersion(transport) {\n  return transport.send(CLA, INS.GET_VERSION, 0, 0).then(response => {\n    const errorCodeData = response.slice(-2);\n    const returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n\n    let targetId = 0;\n    if (response.length >= 9) {\n      /* eslint-disable no-bitwise */\n      targetId = (response[5] << 24) + (response[6] << 16) + (response[7] << 8) + (response[8] << 0);\n      /* eslint-enable no-bitwise */\n    }\n\n    return {\n      return_code: returnCode,\n      error_message: errorCodeToString(returnCode),\n      // ///\n      test_mode: response[0] !== 0,\n      major: response[1],\n      minor: response[2],\n      patch: response[3],\n      device_locked: response[4] === 1,\n      target_id: targetId.toString(16),\n    };\n  }, processErrorResponse);\n}\n"]}]}